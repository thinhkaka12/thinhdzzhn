<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíñ</title>
    <style>
        /* --- C√†i ƒë·∫∑t chung & Font ch·ªØ --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
            overflow: hidden;
            position: relative;
        }

        /* --- N·ªÅn Tr√°i Tim Bay --- */
        .hearts-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .floating-heart {
            position: absolute; font-size: 22px; color: rgba(236, 72, 153, 0.5);
            animation: float 8s infinite ease-in-out;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(180deg); opacity: 0.8; }
        }

        /* --- Khung ch√≠nh & C√°c b∆∞·ªõc --- */
        .container { text-align: center; z-index: 10; max-width: 600px; padding: 20px; }
        .step { display: none; animation: fadeIn 0.8s ease-out; }
        .step.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Giao di·ªán chung --- */
        .quiz-container {
            background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px);
            padding: 30px; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .main-title { font-size: 2.2em; color: #4a2c3a; margin-bottom: 20px; font-weight: 700; }
        .intro-text { font-size: 1.2em; line-height: 1.7; color: #613e4c; }
        .question { font-size: 1.5em; color: #4a2c3a; font-weight: 600; margin-bottom: 30px; }
        
        .answers { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .answer-btn {
            background: linear-gradient(45deg, #f9a8d4, #f472b6);
            border: none; padding: 18px 25px; border-radius: 50px;
            color: #fff; font-size: 1.1em; font-weight: 600;
            cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(244, 114, 182, 0.3);
            -webkit-tap-highlight-color: transparent; /* Lo·∫°i b·ªè hi·ªáu ·ª©ng highlight khi ch·∫°m tr√™n mobile */
        }
        .answer-btn:hover:not(:disabled) { transform: scale(1.05); box-shadow: 0 8px 20px rgba(244, 114, 182, 0.4); }
        .answer-btn:disabled { cursor: not-allowed; opacity: 0.7; }
        
        /* --- Hi·ªáu ·ª©ng tr·∫£ l·ªùi --- */
        .answer-btn.correct { background: linear-gradient(45deg, #4ade80, #22c55e) !important; }
        .answer-btn.incorrect { background: linear-gradient(45deg, #f87171, #ef4444) !important; animation: shake 0.5s ease; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-8px); }
            40%, 80% { transform: translateX(8px); }
        }

        /* --- Thanh ti·∫øn tr√¨nh --- */
        .progress-bar { width: 100%; height: 10px; background: rgba(0, 0, 0, 0.05); border-radius: 10px; margin: 25px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #a78bfa, #8b5cf6); width: 0%; transition: width 0.8s ease-out; border-radius: 10px; }

        /* --- M√†n h√¨nh k·∫øt qu·∫£ --- */
        .final-message { font-size: 1.2em; line-height: 1.7; color: #4a2c3a;}
        .final-message h2 { font-size: 2em; margin-bottom: 15px; color: #8b5cf6; }
        .final-message p { margin-bottom: 20px; }
        .score { font-size: 1.3em; font-weight: bold; }

        /* --- Copyright --- */
        .footer { position: fixed; bottom: 15px; font-size: 0.85em; color: #8c7a82; z-index: 100; }

        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }
        @media (max-width: 768px) { .question { font-size: 1.3em; } .answer-btn { font-size: 1em; padding: 15px 20px; } }
    </style>
</head>
<body>
    
    <audio id="backgroundMusic" loop>
        <source src="https://files.catbox.moe/8la6n1.mp3" type="audio/mpeg">
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
    </audio>

    <div class="hearts-bg" id="heartsBackground"></div>

    <div class="container">
        <div class="step active" id="step0">
             <div class="quiz-container">
                <h2 class="main-title">üíñ Tr·∫Øc Nghi·ªám üíñ</h2>
                <p class="intro-text">Anh ƒë√£ t·∫°o m·ªôt b√†i tr·∫Øc nghi·ªám nh·ªè ƒë·ªÉ ch√∫ng ta c√πng nh√¨n l·∫°i nh·ªØng k·ª∑ ni·ªám. H√£y b·∫Øt ƒë·∫ßu h√†nh tr√¨nh v√† nh·∫≠n b·∫•t ng·ªù cu·ªëi c√πng nh√©!</p>
                <button class="answer-btn" style="margin-top: 30px;" onclick="initGame()">B·∫Øt ƒë·∫ßu h√†nh tr√¨nh!</button>
            </div>
        </div>

        </div>
    
    <footer class="footer">¬© Tr∆∞·ªùng Th·ªãnh</footer>

<script>
    // --- D·ªÆ LI·ªÜU C√ÇU H·ªéI (ANH C√ì TH·ªÇ CH·ªàNH S·ª¨A ·ªû ƒê√ÇY) ---
    const questions = [
        {
            question: "Em c√≥ nh·ªõ ng√†y k·ª∑ ni·ªám s·ª± ra ƒë·ªùi c·ªßa 'ai ƒë√≥' kh√¥ng nh·ªâ? üòâ",
            answers: ["25/11/2010", "12/05/2010", "25/12/2010"],
            correctAnswer: "25/12/2010"
        },
        {
            question: "ƒêi·ªÅu anh mu·ªën nghe nh·∫•t t·ª´ em ngay l√∫c n√†y l√† g√¨? ‚ù§Ô∏è",
            answers: ["'Gh√©t anh l·∫Øm' (ch·∫Øc th·∫ø) üòÇ", "Dƒ© nhi√™n l√† em y√™u anh r·ªìi üíñ", "ƒê·ªÉ em suy nghƒ© ƒë√£ nh√©... ü§î"],
            correctAnswer: "Dƒ© nhi√™n l√† em y√™u anh r·ªìi üíñ"
        },
        {
            question: "Tr√°i tim em n√≥i r·∫±ng, v·ªã tr√≠ ƒë·∫∑c bi·ªát nh·∫•t ch·ªâ d√†nh cho...?",
            answers: ["M·ªôt m√¨nh anh th√¥i ƒë√≥ ü•∞", "M·ªôt 'c√¢y ATM' ƒë√°ng tin c·∫≠y üòú", "M·ªôt ng∆∞·ªùi b·∫°n th√¢n"],
            correctAnswer: "M·ªôt m√¨nh anh th√¥i ƒë√≥ ü•∞"
        },
        {
            question: "Ai l√† ch√†ng trai may m·∫Øn nh·∫•t th·∫ø gian v√¨ c√≥ ƒë∆∞·ª£c em? üòä",
            answers: ["Tr·∫ßn Minh Kh√¥i", "Nguy·ªÖn Tr∆∞·ªùng Th·ªãnh", "L√™ Ho√†ng Nh·∫≠t"],
            correctAnswer: "Nguy·ªÖn Tr∆∞·ªùng Th·ªãnh"
        },
        {
            question: "C√¢u h·ªèi cu·ªëi c√πng n√®... Cho anh th∆°m m√° m·ªôt c√°i ƒë∆∞·ª£c kh√¥ng? üòö",
            answers: ["M∆° ƒëi nha! üòú", "ƒê·ªÉ xem th√°i ƒë·ªô c·ªßa anh ƒë√£... üòè", "D·∫° ƒë∆∞·ª£c...ü•∞"],
            correctAnswer: "D·∫° ƒë∆∞·ª£c...ü•∞"
        }
    ];

    // --- BI·∫æN TO√ÄN C·ª§C ---
    let currentQuestionIndex = 0;
    let score = 0;
    let firstTry = true;
    
    const music = document.getElementById('backgroundMusic');
    const container = document.querySelector('.container');

    // --- H√ÄM KH·ªûI T·∫†O GAME ---
    function initGame() {
        startMusic();
        createQuestionSteps();
        // B·∫Øt ƒë·∫ßu v·ªõi c√¢u h·ªèi ƒë·∫ßu ti√™n (step 1)
        goToStep(1);
    }

    function createQuestionSteps() {
        // X√≥a m√†n h√¨nh ch√†o m·ª´ng
        const step0 = document.getElementById('step0');
        if (step0) step0.remove();

        // T·∫°o c√°c step c√¢u h·ªèi t·ª´ d·ªØ li·ªáu
        questions.forEach((q, index) => {
            const stepNum = index + 1;
            const step = document.createElement('div');
            step.className = 'step';
            step.id = `step${stepNum}`;

            let answersHTML = '';
            // Tr·ªôn ng·∫´u nhi√™n c√°c c√¢u tr·∫£ l·ªùi ƒë·ªÉ m·ªói l·∫ßn ch∆°i kh√°c nhau
            const shuffledAnswers = [...q.answers].sort(() => Math.random() - 0.5);
            
            shuffledAnswers.forEach(answer => {
                const isCorrect = answer === q.correctAnswer;
                answersHTML += `<button class="answer-btn" ${isCorrect ? 'data-correct="true"' : ''} onclick="checkAnswer(this, ${stepNum})">${answer}</button>`;
            });

            step.innerHTML = `
                <div class="quiz-container">
                    <div class="progress-bar"><div class="progress-fill" style="width: ${((stepNum - 1) / questions.length) * 100}%"></div></div>
                    <p class="question">${q.question}</p>
                    <div class="answers">${answersHTML}</div>
                </div>
            `;
            container.appendChild(step);
        });

        // T·∫°o step k·∫øt qu·∫£ cu·ªëi c√πng
        const resultStep = document.createElement('div');
        resultStep.className = 'step';
        resultStep.id = `step${questions.length + 1}`;
        resultStep.innerHTML = `<div class="quiz-container final-message"></div>`;
        container.appendChild(resultStep);
    }

    // --- LOGIC GAME ---
    function goToStep(step) {
        const activeStep = document.querySelector('.step.active');
        if (activeStep) activeStep.classList.remove('active');
        
        const nextStep = document.getElementById(`step${step}`);
        if (nextStep) nextStep.classList.add('active');
        
        firstTry = true; // Reset l·∫°i cho c√¢u h·ªèi m·ªõi
    }

    function checkAnswer(button, stepNum) {
        const isCorrect = button.dataset.correct === 'true';
        const answerButtons = button.parentElement.querySelectorAll('.answer-btn');

        answerButtons.forEach(btn => btn.disabled = true);

        if (isCorrect) {
            button.classList.add('correct');
            playSoundEffect();
            if (firstTry) {
                score++;
            }
        } else {
            button.classList.add('incorrect');
            firstTry = false;
            answerButtons.forEach(btn => {
                if (btn.dataset.correct === 'true') {
                    btn.classList.add('correct');
                }
            });
        }
        
        const progressBar = document.querySelector(`#step${stepNum} .progress-fill`);
        if (progressBar) {
            progressBar.style.width = (stepNum / questions.length) * 100 + '%';
        }

        setTimeout(() => {
            if (stepNum < questions.length) {
                goToStep(stepNum + 1);
            } else {
                showResults();
            }
        }, 2000);
    }

    function showResults() {
        const finalStepIndex = questions.length + 1;
        const finalMessageContainer = document.querySelector(`#step${finalStepIndex} .final-message`);
        let messageHTML = '';

        if (score === questions.length) {
            messageHTML = `
                <h2>EM L√Ä TUY·ªÜT V·ªúI NH·∫§T!</h2>
                <p>Em tr·∫£ l·ªùi ƒë√∫ng h·∫øt r·ªìi! Em kh√¥ng ch·ªâ nh·ªõ m·ªçi th·ª© v·ªÅ anh m√† c√≤n lu√¥n d√†nh cho anh nh·ªØng ƒëi·ªÅu ng·ªçt ng√†o nh·∫•t. C·∫£m ∆°n em v√¨ t·∫•t c·∫£.</p>
                <p class="score">ƒêi·ªÉm tuy·ªát ƒë·ªëi: ${score}/${questions.length}</p>
            `;
        } else if (score >= Math.ceil(questions.length * 0.6)) { // ƒê√∫ng t·ª´ 60% tr·ªü l√™n (3/5 c√¢u)
            messageHTML = `
                <h2>EM NH·ªö G·∫¶N H·∫æT R·ªíI!</h2>
                <p>Ch√∫ng ta ƒë√£ c√≥ r·∫•t nhi·ªÅu k·ª∑ ni·ªám ƒë·∫πp b√™n nhau ph·∫£i kh√¥ng? M·ªói c√¢u tr·∫£ l·ªùi c·ªßa em ƒë·ªÅu khi·∫øn anh c·∫£m th·∫•y r·∫•t h·∫°nh ph√∫c. C·∫£m ∆°n em.</p>
                <p class="score">ƒêi·ªÉm c·ªßa em: ${score}/${questions.length}</p>
            `;
        } else {
            messageHTML = `
                <h2>KH√îNG SAO C·∫¢ ƒê√ÇU EM!</h2>
                <p>ƒêi·ªÉm s·ªë kh√¥ng quan tr·ªçng, quan tr·ªçng l√† hi·ªán t·∫°i ch√∫ng ta v·∫´n ƒëang c√πng nhau t·∫°o n√™n nh·ªØng k·ª∑ ni·ªám m·ªõi tuy·ªát v·ªùi h∆°n m·ªói ng√†y. Y√™u em!</p>
                <p class="score">ƒêi·ªÉm c·ªßa em: ${score}/${questions.length}</p>
            `;
        }
        
        if (finalMessageContainer) {
            finalMessageContainer.innerHTML = messageHTML;
        }
        goToStep(finalStepIndex);
    }
    
    // --- H√ÄM H·ªñ TR·ª¢ & KH·ªûI T·∫†O ---
    window.addEventListener('load', createFloatingHearts);

    function startMusic() {
        if (music.paused) {
            music.volume = 0.8;
            music.play().catch(e => console.error("L·ªói ph√°t nh·∫°c:", e));
        }
    }
    
    function createFloatingHearts() {
        const heartsContainer = document.getElementById('heartsBackground');
        if(!heartsContainer) return;
        heartsContainer.innerHTML = '';
        const heartSymbols = ['üíï', 'üíñ', 'üíó', '‚ù§Ô∏è', 'üíù'];
        for (let i = 0; i < 20; i++) {
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDelay = Math.random() * 8 + 's';
            heart.style.animationDuration = (Math.random() * 5 + 7) + 's';
            heartsContainer.appendChild(heart);
        }
    }
    
    function playSoundEffect() {
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.1, audioContext.currentTime + 0.01);
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + 0.2);
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
        } catch (e) { console.log('Audio Context kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£.'); }
    }
</script>

</body>
</html>
